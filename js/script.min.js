var pageSpeed=25,scrolldelay,timer;
$(function(){setTimeout(function(){window.scrollTo(0,0)},100);$(".marker, .overlay").fadeOut(0);clean_teleprompter();timer=$(".clock").timer({stopVal:1E4});$("#teleprompter").change(clean_teleprompter);$("body").keydown(navigate);$("article .teleprompter").css({"padding-bottom":Math.ceil($(window).height()-$("header").height())+"px"});$(".font_size").slider({min:12,max:100,value:60,orientation:"horizontal",range:"min",animate:!0,slide:fontSize,change:fontSize});$(".speed").slider({min:1,max:50,value:35,
orientation:"horizontal",range:"min",animate:!0,slide:speed,change:speed});$(".button.play").click(function(){$(this).hasClass("icon-play")?start_teleprompter():stop_teleprompter()});$(".button.flipx").click(function(){$(".teleprompter").hasClass("flipy")?$(".teleprompter").removeClass("flipy").toggleClass("flipxy"):$(".teleprompter").toggleClass("flipx")});$(".button.flipy").click(function(){$(".teleprompter").hasClass("flipx")?$(".teleprompter").removeClass("flipx").toggleClass("flipxy"):$(".teleprompter").toggleClass("flipy")});
$(".button.reset").click(function(){stop_teleprompter();setTimeout(function(){window.scrollTo(0,0)},100);$(".speed").slider("value",35);$(".font_size").slider("value",60);$(".teleprompter").removeClass("flipx flipy flipxy flipxy_alt")})});
function fontSize(){var a=$(".font_size").slider("value");$("article .teleprompter").css({"font-size":a+"px","line-height":Math.ceil(1.5*a)+"px","padding-bottom":Math.ceil($(window).height()-$("header").height())+"px"});$("article .teleprompter p").css({"padding-bottom":Math.ceil(0.25*a)+"px","margin-bottom":Math.ceil(0.25*a)+"px"})}function speed(){pageSpeed=50-$(".speed").slider("value")}
function pageScroll(){$("body").stop().animate({scrollTop:window.pageYOffset+1},1);scrolldelay=setTimeout("pageScroll()",pageSpeed);window.pageYOffset>=document.body.scrollHeight-$(window).height()&&(stop_teleprompter(),setTimeout(function(){window.scrollTo(0,0)},100))}
function navigate(a){var c=$(".speed").slider("value"),b=$(".font_size").slider("value");if(!("undefined"==typeof a.target.id||"teleprompter"==a.target.id)){if("undefined"==typeof a.target.id||"gui"!=a.target.id)return a.preventDefault(),a.stopPropagation(),!1;if(27==a.keyCode)return $(".button.reset").trigger("click"),a.preventDefault(),a.stopPropagation(),!1;if(32==a.keyCode)return $(".button.play").trigger("click"),a.preventDefault(),a.stopPropagation(),!1;if(37==a.keyCode)return $(".speed").slider("value",
c-1),a.preventDefault(),a.stopPropagation(),!1;if(40==a.keyCode)return $(".font_size").slider("value",b-1),a.preventDefault(),a.stopPropagation(),!1;if(38==a.keyCode)return $(".font_size").slider("value",b+1),a.preventDefault(),a.stopPropagation(),!1;if(39==a.keyCode)return $(".speed").slider("value",c+1),a.preventDefault(),a.stopPropagation(),!1}}
function start_teleprompter(){$(".button.play").removeClass("icon-play").addClass("icon-pause");$("header h1, header nav").fadeTo("slow",0.15);$(".marker, .overlay").fadeIn("slow");$("body").addClass("playing");timer.resetTimer();timer.startTimer();pageScroll()}
function stop_teleprompter(){clearTimeout(scrolldelay);$("header h1, header nav").fadeTo("slow",1);$(".button.play").removeClass("icon-pause").addClass("icon-play");$(".marker, .overlay").fadeOut("slow");$("body").removeClass("playing");timer.stopTimer()}function clean_teleprompter(){var a=$("#teleprompter").html();$("#teleprompter").html("<p>"+a.replace(/<br>+/g,"@@").replace(/@@@@/g,"</p><p>")+"</p>")}window.onresize=function(){};
(function(a){function c(a,c){if(!(1<a.originalEvent.touches.length)){a.preventDefault();var b=a.originalEvent.changedTouches[0],d=document.createEvent("MouseEvents");d.initMouseEvent(c,!0,!0,window,1,b.screenX,b.screenY,b.clientX,b.clientY,!1,!1,!1,!1,0,null);a.target.dispatchEvent(d)}}a.support.touch="ontouchend"in document;if(a.support.touch){var b=a.ui.mouse.prototype,e=b._mouseInit,d;b._touchStart=function(a){!d&&this._mouseCapture(a.originalEvent.changedTouches[0])&&(d=!0,this._touchMoved=!1,
c(a,"mouseover"),c(a,"mousemove"),c(a,"mousedown"))};b._touchMove=function(a){d&&(this._touchMoved=!0,c(a,"mousemove"))};b._touchEnd=function(a){d&&(c(a,"mouseup"),c(a,"mouseout"),this._touchMoved||c(a,"click"),d=!1)};b._mouseInit=function(){this.element.bind("touchstart",a.proxy(this,"_touchStart")).bind("touchmove",a.proxy(this,"_touchMove")).bind("touchend",a.proxy(this,"_touchEnd"));e.call(this)}}})(jQuery);
